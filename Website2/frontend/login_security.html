<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login & Security - EcoMart</title>
    <link rel="stylesheet" href="consumer_home.css">
    <link rel="stylesheet" href="account.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>

    <header class="navbar">
        <div class="nav-container">
            <a href="consumer_home.html" class="logo">EcoMart</a>
            <div class="nav-links">
                <!-- Navigation links removed -->
            </div>
            <div class="search-bar">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="search" placeholder="Search for products...">
            </div>
            <div class="nav-actions">
                <a href="account.html" class="nav-icon-btn">
                    <i class="fa-solid fa-user"></i>
                    <span>Profile</span>
                </a>
                <button id="cart-btn" class="nav-cart-btn">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <span id="cart-count">0</span>
                    <span>Cart</span>
                </button>
            </div>
        </div>
    </header>

    <main class="account-container">
        <a href="account.html" class="back-link"><i class="fa-solid fa-chevron-left"></i> Back to Your Account</a>
        <h1>Login & Security</h1>

        <form class="account-form" id="security-form">
            
            <div class="form-card">
                <h3>Edit Your Name</h3>
                <div class="input-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" value="John Doe" required>
                </div>
                <button type="button" class="form-button">Save Name</button>
            </div>

            <div class="form-card">
                <h3>Edit Your Email</h3>
                <div class="input-group">
                    <label for="email">Email Address</label>
                    <div class="email-verify-group">
                        <input type="email" id="email" value="john.doe@example.com" required>
                        <button type="button" id="send-otp-btn" class="form-button-outline">Send Passkey</button>
                    </div>
                    <p class="form-note">A one-time passkey will be sent to confirm your new email.</p>
                </div>
            </div>

            <div class="form-card">
                <h3>Change Your Password</h3>
                <div class="input-group">
                    <label for="current-password">Current Password</label>
                    <input type="password" id="current-password" required>
                </div>
                <div class="input-group">
                    <label for="new-password">New Password</label>
                    <input type="password" id="new-password" required>
                </div>
                <button type="button" class="form-button">Save Password</button>
            </div>

        </form>
    </main>

    <div id="otp-modal-overlay" class="otp-overlay hidden">
        <div class="otp-modal-box">
            <h2>Verify Your Email</h2>
            <p>Please enter the 6-digit passkey sent to your new email address.</p>
            <form id="otp-form">
                <input type="text" id="otp-input" placeholder="123456" maxlength="6" required>
                <button type="submit" id="confirm-otp-btn" class="form-button">Confirm & Save Email</button>
                <button type="button" id="cancel-otp-btn" class="form-button-outline">Cancel</button>
            </form>
            <p id="otp-status" class="otp-status-text"></p>
        </div>
    </div>


</script>
    <script src="login_security.js"></script>
    <script>
        // Basic cart functionality for profile page
        document.addEventListener('DOMContentLoaded', () => {
            const cartBtn = document.getElementById('cart-btn');
            const cartModal = document.getElementById('cart-modal');
            const cartCloseBtn = document.getElementById('cart-close-btn');
            const overlay = document.getElementById('modal-overlay');
            const cartCountSpan = document.getElementById('cart-count');
            const cartTotalSpan = document.getElementById('cart-total');
            const checkoutBtn = document.querySelector('.checkout-btn');

            // Load cart from localStorage
            let cart = JSON.parse(localStorage.getItem('cart')) || [];

            // Update cart display
            function updateCartDisplay() {
                if (cartCountSpan) {
                    cartCountSpan.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
                }
                if (cartTotalSpan) {
                    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                    cartTotalSpan.textContent = `â‚¹${total.toFixed(2)}`;
                }
            }

            // Modal functions
            const openModal = (modal) => {
                if (modal && overlay) {
                    modal.classList.add('open');
                    overlay.classList.remove('hidden');
                }
            };

            const closeModal = () => {
                if (cartModal) cartModal.classList.remove('open');
                if (overlay) overlay.classList.add('hidden');
            };

            // Event listeners
            if (cartBtn) cartBtn.addEventListener('click', () => openModal(cartModal));
            if (cartCloseBtn) cartCloseBtn.addEventListener('click', closeModal);
            if (overlay) overlay.addEventListener('click', closeModal);
            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', () => {
                    window.location.href = 'checkout.html';
                });
            }

            // Initialize cart display
            updateCartDisplay();
        });
    </script></script>

    <div id="modal-overlay" class="hidden"></div>

    <div id="profile-modal" class="modal-drawer">
        </div>

    <div id="cart-modal" class="modal-drawer">
        <div class="modal-header">
            <h2>Your Cart</h2>
            <button id="cart-close-btn" class="close-btn"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div class="modal-content">
            <div id="cart-items-list">
                <p class="cart-empty-msg">Your cart is empty.</p>
                </div>
            
            <div class="cart-summary">
                <p>Total: <span id="cart-total">$0.00</span></p>
                <button class="checkout-btn">Proceed to Purchase</button>
            </div>
        </div>
    </div>

</body>
</html>